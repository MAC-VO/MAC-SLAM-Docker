services:
  l4t:
    build: 
      context: .
      dockerfile: Dockerfile
    
    image: yutianchen/macslam:may2025-v1-l4t
    container_name: dev-macslam
    runtime: nvidia

    volumes:
      - /home/airlab/workspace:/home/root/workspace:rw
    
    network_mode: "host" 

    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - ROS_DOMAIN_ID=0
      - RMW_IMPLEMENTATION=rmw_fastrtps_cpp
    
    command: bash
    tty: true
    stdin_open: true
    user: "root"
